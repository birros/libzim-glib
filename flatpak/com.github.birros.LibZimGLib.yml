id: com.github.birros.LibZimGLib
runtime: org.gnome.Platform
runtime-version: '3.28'
sdk: org.gnome.Sdk
command: bash
build-options:
  cflags: -O2 -g
  cxxflags: -O2 -g
modules:
  - name: xapian-core
    cleanup:
      - /bin
      - /include
      - /lib/pkgconfig
      - /lib/cmake
      - /lib/*.la
      - /share
    sources:
      - type: archive
        url: https://oligarchy.co.uk/xapian/1.4.5/xapian-core-1.4.5.tar.xz
        sha256: 85b5f952de9df925fd13e00f6e82484162fd506d38745613a50b0a2064c6b02b

  #
  # require
  #   xapian-core
  #
  - name: libzim
    buildsystem: meson
    builddir: true
    cleanup:
      - /bin
      - /include
      - /lib/pkgconfig
    sources:
      - type: archive
        url: https://github.com/openzim/libzim/archive/4.0.0.tar.gz
        sha256: e195d30ba1b55dd2b6529fdd84fcbed6ec35ed4ddc957ad7725edabd20c3126c

  - name: libzim-glib
    buildsystem: meson
    builddir: true
    sources:
      - type: git
        url: https://github.com/birros/libzim-glib
