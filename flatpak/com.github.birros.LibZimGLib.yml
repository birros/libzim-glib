id: com.github.birros.LibZimGLib
runtime: org.gnome.Platform
runtime-version: '3.28'
sdk: org.gnome.Sdk
command: bash
build-options:
  cflags: -O2 -g
  cxxflags: -O2 -g
modules:
  - name: xapian-core
    cleanup:
      - /bin
      - /include
      - /lib/pkgconfig
      - /lib/cmake
      - /lib/*.la
      - /share
    sources:
      - type: archive
        url: https://oligarchy.co.uk/xapian/1.4.6/xapian-core-1.4.6.tar.xz
        sha256: 1e0ef1c1d3e2119874d545b7edbb60e6e17d7d18fb802eb890d9ef7bb0bbd898

  #
  # require
  #   xapian-core
  #
  - name: libzim
    buildsystem: meson
    builddir: true
    cleanup:
      - /bin
      - /include
      - /lib/pkgconfig
    sources:
      - type: archive
        url: https://github.com/openzim/libzim/archive/4.0.0.tar.gz
        sha256: e195d30ba1b55dd2b6529fdd84fcbed6ec35ed4ddc957ad7725edabd20c3126c

  - name: libzim-glib
    buildsystem: meson
    builddir: true
    sources:
      - type: git
        url: https://github.com/birros/libzim-glib
